webpackJsonp([1],{"+IMQ":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".permissionDownloadLayout[data-v-0a866cbf] {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  padding-top: 20px;\n  overflow: auto;\n}\n.permissionDownloadLayout .frameArea[data-v-0a866cbf] {\n    height: 600px;\n    width: 1000px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.permissionDownloadLayout .button_area[data-v-0a866cbf] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: start;\n        -ms-flex-pack: start;\n            justify-content: flex-start;\n    margin-top: 48px;\n    margin-left: 820px;\n}\n",""])},"/MTU":function(t,e,n){var i=n("hj8t");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("d4d58bd0",i,!0)},"0vV7":function(t,e,n){var i=n("XvXO");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("42aabbbe",i,!0)},"5zde":function(t,e,n){n("zQR9"),n("qyJz"),t.exports=n("FeBl").Array.from},"77GP":function(t,e,n){"use strict";var i=n("bshw");n.n(i).a},Dmvm:function(t,e,n){var i=n("sbtr");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("9af15b02",i,!0)},EFYs:function(t,e,n){"use strict";var i=n("0vV7");n.n(i).a},GDDb:function(t,e,n){"use strict";var i=n("IWO5");n.n(i).a},Gu7T:function(t,e,n){"use strict";e.__esModule=!0;var i,a=n("c/Tr"),r=(i=a)&&i.__esModule?i:{default:i};e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,r.default)(t)}},IWO5:function(t,e,n){var i=n("+IMQ");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("2b79f46f",i,!0)},RAEb:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".permissionEditLayout[data-v-46234592] {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  margin: auto;\n  padding-top: 20px;\n}\n.permissionEditLayout .frameArea[data-v-46234592] {\n    height: 600px;\n    width: 1000px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.permissionEditLayout .button_area[data-v-46234592] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: start;\n        -ms-flex-pack: start;\n            justify-content: flex-start;\n    margin-top: 48px;\n    margin-left: 820px;\n}\n",""])},XvXO:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".theTreeTransfer[data-v-57b72449] {\n  height: 100%;\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.theTreeTransfer .left_area[data-v-57b72449] {\n    height: 100%;\n    width: 40%;\n    -webkit-box-flex: 0;\n        -ms-flex: none;\n            flex: none;\n    overflow: hidden;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    background: white;\n}\n.theTreeTransfer .left_area .top_title_left[data-v-57b72449] {\n      width: 100%;\n      background-color: #f3f3f5;\n      color: #363c46;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      -ms-flex-pack: distribute;\n          justify-content: space-around;\n      font-weight: 500;\n      height: 50px;\n}\n.theTreeTransfer .left_area .treeArea[data-v-57b72449] {\n      -webkit-box-flex: 1;\n          -ms-flex: 1;\n              flex: 1;\n      width: 100%;\n      overflow: auto;\n}\n.theTreeTransfer .middle_btn[data-v-57b72449] {\n    width: 20%;\n    margin: auto 70px auto 70px;\n}\n.theTreeTransfer .right_area[data-v-57b72449] {\n    height: 100%;\n    width: 40%;\n    -webkit-box-flex: 0;\n        -ms-flex: none;\n            flex: none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    background: white;\n}\n.theTreeTransfer .right_area .top_title_right[data-v-57b72449] {\n      width: 100%;\n      background-color: #f3f3f5;\n      color: #363c46;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      -ms-flex-pack: distribute;\n          justify-content: space-around;\n      font-weight: 500;\n      height: 50px;\n}\n.theTreeTransfer[data-v-57b72449] .v-treeview-node__label {\n    font-size: 14px !important;\n}\n.theTreeTransfer[data-v-57b72449] .v-list__tile__title {\n    font-size: 14px !important;\n}\n",""])},YKlX:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Xxa5"),a=n.n(i),r=n("exGp"),o=n.n(r),s=n("Gu7T"),l=n.n(s),c=n("0jG4"),d={props:{value:{type:Array,default:function(){return[{},{}]}},onlyLeaf:{type:Boolean,default:function(){return!1}},leftAreaTitle:{type:String,default:function(){return"1"}},rightAreaTitle:{type:String,default:function(){return"2"}},inputTitle:{type:String,default:function(){return"支持姓名、部门"}}},data:function(){return{open:[],active:[],filters:{keyword:""},keyword:"",treeData:[],loadingtree:!1}},conputed:{orgs:function(){}},mounted:function(){this.getDepartmentList()},methods:{updateKeyword:function(){this.keyword=this.filters.keyword},del:function(t){this.value.splice(t,1)},updateValue:function(t){this.$emit("input",t)},getDepartmentList:function(){var t=this;return o()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loadingtree=!0,e.next=4,c.e.getDepartmentList();case 4:n=e.sent,t.treeData=n,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),Error;case 11:return e.prev=11,t.loadingtree=!1,e.finish(11);case 14:case"end":return e.stop()}},e,t,[[0,8,11,14]])}))()},loadChildren:function(t){var e=this;return o()(a.a.mark(function n(){var i,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,!t.isOrg){e.next=8;break}return e.next=4,c.e.getDepartmentUserList({departmentName:t.key});case 4:i=e.sent,(r=t.children).push.apply(r,l()(i)),e.next=9;break;case 8:i=null;case 9:case"end":return e.stop()}},n,e)}))()},addLeftToRight:function(){var t=this,e=this,n=this.active.filter(function(t){return!e.onlyLeaf||!t.isOrg});n=n.filter(function(e){var n=e.key;return!t.value.find(function(t){return t.key===n})});var i=this.value.concat(n);this.updateValue(i.map(function(t){return t.simplyMe()})),this.active=[]}}},u=(n("EFYs"),n("K1/g")),p=Object(u.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"theTreeTransfer"},[n("div",{staticClass:"left_area"},[n("div",{staticClass:"top_title_left"},[t._v(t._s(t.leftAreaTitle))]),t._v(" "),n("el-input",{staticStyle:{width:"80%",flex:"none","background-color":"transparent","margin-top":"20px","margin-bottom":"20px"},attrs:{placeholder:t.inputTitle,maxlength:"20",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateKeyword(e)}},model:{value:t.filters.keyword,callback:function(e){t.$set(t.filters,"keyword",e)},expression:"filters.keyword"}},[n("i",{staticClass:"el-icon-search",staticStyle:{display:"flex","align-items":"center",height:"100%",width:"20px",cursor:"pointer","font-size":"15px"},attrs:{slot:"suffix"},on:{click:t.updateKeyword},slot:"suffix"})]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingtree,expression:"loadingtree"}],staticClass:"treeArea"},[n("v-treeview",{ref:"tree",attrs:{open:t.open,"return-object":!0,items:t.treeData,search:t.keyword,"load-children":t.loadChildren,"item-key":"key","item-text":"title",active:t.active,activatable:"","multiple-active":!0},on:{"update:open":function(e){t.open=e},"update:active":function(e){t.active=e}}})],1)],1),t._v(" "),n("div",{staticClass:"middle_btn"},[n("el-button",{staticStyle:{width:"60px"},attrs:{size:"small",type:"primary",color:"rgba(255, 79, 90, 1)",icon:"el-icon-arrow-right"},on:{click:t.addLeftToRight}})],1),t._v(" "),n("div",{staticClass:"right_area"},[n("div",{staticClass:"top_title_right"},[t._v(t._s(t.rightAreaTitle))]),t._v(" "),n("v-list",{staticStyle:{overflow:"auto",flex:"1",width:"100%","margin-top":"20px"}},t._l(t.value,function(e,i){return n("v-list-tile",{key:e.key,attrs:{avatar:""}},[n("v-list-tile-avatar",[n("v-icon",[t._v(t._s(e.isOrg?"group":"face"))])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v(t._s(e.title))])],1),t._v(" "),n("v-list-tile-action",[n("v-btn",{attrs:{icon:"",ripple:""}},[n("v-icon",{attrs:{color:"grey lighten-1"},on:{click:function(e){return t.del(i)}}},[t._v("delete")])],1)],1)],1)}),1)],1)])},[],!1,null,"57b72449",null).exports,f=n("IaYK"),x=n("ilaD"),v={props:{productId:{}},components:{treeTransfer:p},data:function(){return{viewModel:{download:[]}}},mounted:function(){this.getDepartmentList(),this.searchForDownload()},methods:{getDepartmentList:function(){var t=this;return o()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.e.getDepartmentList();case 2:n=e.sent,t.treeData=n;case 4:case"end":return e.stop()}},e,t)}))()},searchForDownload:function(){var t=this;return o()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.queryAuthorizeForProduct_download(t.productId);case 2:t.viewModel.download=e.sent;case 3:case"end":return e.stop()}},e,t)}))()},cancel:function(){this.$modal.show(f.a,{},{draggable:".top",height:"250px",width:"520px"},{closed:function(t){!0===t&&x.b.goProductManage()}})},save:function(){var t=this.viewModel.download;t.length<1?this.$message({type:"error",message:"请先选择部门及人员"}):this.$emit("onSubmit",t)}}},m=(n("GDDb"),Object(u.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"permissionDownloadLayout"},[n("div",{staticClass:"frameArea"},[n("treeTransfer",{attrs:{leftAreaTitle:"未选择部门及人员",rightAreaTitle:"已选择部门及人员",inputTitle:"支持姓名、部门"},model:{value:t.viewModel.download,callback:function(e){t.$set(t.viewModel,"download",e)},expression:"viewModel.download"}})],1),t._v(" "),n("div",{staticClass:"button_area"},[n("el-button",{attrs:{round:""},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary",round:""},on:{click:t.save}},[t._v(" 提交 ")])],1)])},[],!1,null,"0a866cbf",null).exports),h={props:{productId:{}},components:{treeTransfer:p},data:function(){return{viewModel:{edit:[]}}},mounted:function(){this.getDepartmentList(),this.searchForEdit()},methods:{getDepartmentList:function(){var t=this;return o()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.e.getDepartmentList();case 2:n=e.sent,t.treeData=n;case 4:case"end":return e.stop()}},e,t)}))()},searchForEdit:function(){var t=this;return o()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.c.queryAuthorizeForProduct_edit(t.productId);case 2:t.viewModel.edit=e.sent;case 3:case"end":return e.stop()}},e,t)}))()},cancel:function(){this.$modal.show(f.a,{},{draggable:".top",height:"250px",width:"520px"},{closed:function(t){!0===t&&x.b.goProductManage()}})},save:function(){var t=this.viewModel.edit;t.length<1?this.$message({type:"error",message:"请先选择人员"}):this.$emit("onSubmit",t)}}},b=(n("77GP"),Object(u.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"permissionEditLayout"},[n("div",{staticClass:"frameArea"},[n("treeTransfer",{attrs:{onlyLeaf:!0,leftAreaTitle:"未选择人员",rightAreaTitle:"已选择人员",inputTitle:"支持姓名"},model:{value:t.viewModel.edit,callback:function(e){t.$set(t.viewModel,"edit",e)},expression:"viewModel.edit"}})],1),t._v(" "),n("div",{staticClass:"button_area"},[n("el-button",{attrs:{round:""},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary",round:""},on:{click:t.save}},[t._v(" 提交 ")])],1)])},[],!1,null,"46234592",null).exports),g=n("XOvE"),y={mixins:[n("yqLs").a],props:{productId:{type:String|Number},resultTitle:{type:String},resultMsg:{type:String}},data:function(){return{}},components:{modaltemplate2:g.a},methods:{waitPermission:function(){x.b.goProductManage(),this.$closeModal()},goPermission:function(){x.b.goVersionManage(this.productId),this.$closeModal()}}},w=(n("kR4T"),Object(u.a)(y,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modaltemplate2",{scopedSlots:t._u([{key:"top",fn:function(){return[n("div",{staticClass:"top_area"},[t._v("提交结果")])]},proxy:!0},{key:"main",fn:function(){return[n("div",{staticClass:"main_area"},[n("i",{staticClass:"el-icon-success",staticStyle:{"font-size":"72px",color:"rgba(103, 218, 193, 1)"}}),t._v(" "),n("div",{staticClass:"title1"},[n("b",[t._v(t._s(t.resultTitle))])]),t._v(" "),n("div",{staticClass:"title2"},[t._v(t._s(t.resultMsg))])])]},proxy:!0},{key:"bottom",fn:function(){return[n("div",{staticClass:"bottom_area"},[n("el-button",{staticClass:"btn_wait_permission",attrs:{round:""},on:{click:t.waitPermission}},[t._v(" 暂不处理 ")]),t._v(" "),n("el-button",{attrs:{round:"",type:"primary"},on:{click:t.goPermission}},[t._v("新增版本")])],1),t._v("·\n    ")]},proxy:!0}])})},[],!1,null,"785d2f48",null).exports),k={components:{download:m,edit:b},data:function(){return{active:"first",productId:""}},computed:{productIdFromRouter:function(){return this.$route.query.productId}},created:function(){this.init()},methods:{init:function(){this.productId=this.productIdFromRouter},onNext:function(t){this.active="second"},onDownloadSubmit:function(t){var e=this;return o()(a.a.mark(function n(){var i,r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.c.authorizeForProduct_download(e.productId,t);case 2:return i={pageSize:1,pageNum:1},n.next=5,c.g.getMyVersionListByProductId(i,e.productId,"");case 5:if((r=n.sent).list&&r.list.length>0)e.$message({type:"success",message:"授权成功"}),x.b.goProductManage();else try{e.$modal.show(w,{productId:e.productId,resultTitle:"授权成功",resultMsg:"您尚未添加版本，点击新增版本去版本页面"},{draggable:".top",height:"413px",width:"538px"})}catch(t){console.log(t)}case 7:case"end":return n.stop()}},n,e)}))()},onEditSubmit:function(t){var e=this;return o()(a.a.mark(function n(){var i,r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.c.authorizeForProduct_edit(e.productId,t);case 2:return i={pageSize:1,pageNum:1},n.next=5,c.g.getMyVersionListByProductId(i,e.productId,"");case 5:if((r=n.sent).list&&r.list.length>0)e.$message({type:"success",message:"授权成功"}),x.b.goProductManage();else try{e.$modal.show(w,{productId:e.productId,resultTitle:"授权成功",resultMsg:"您尚未添加版本，点击新增版本去版本页面"},{draggable:".top",height:"413px",width:"538px"})}catch(t){console.log(t)}case 7:case"end":return n.stop()}},n,e)}))()}}},_=(n("aMt2"),Object(u.a)(k,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"productPermissionLayout"},[n("el-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("el-tab-pane",{attrs:{label:"下载权限设置",name:"first"}},[n("download",{attrs:{productId:t.productId},on:{onNext:t.onNext,onSubmit:t.onDownloadSubmit}})],1),t._v(" "),n("el-tab-pane",{attrs:{label:"产品维护权限设置",name:"second"}},[n("edit",{attrs:{productId:t.productId},on:{onSubmit:t.onEditSubmit}})],1)],1)],1)},[],!1,null,"41464946",null));e.default=_.exports},aMt2:function(t,e,n){"use strict";var i=n("Dmvm");n.n(i).a},bshw:function(t,e,n){var i=n("RAEb");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("1556cfa8",i,!0)},"c/Tr":function(t,e,n){t.exports={default:n("5zde"),__esModule:!0}},fBQ2:function(t,e,n){"use strict";var i=n("evD5"),a=n("X8DO");t.exports=function(t,e,n){e in t?i.f(t,e,a(0,n)):t[e]=n}},hj8t:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".top_area[data-v-785d2f48] {\n  font-size: 16px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-left: 24px;\n  color: #363c46;\n}\n.main_area[data-v-785d2f48] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-top: 41px;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.main_area .title1[data-v-785d2f48] {\n    font-size: 20px;\n    margin-top: 24px;\n    height: 32px;\n}\n.main_area .title2[data-v-785d2f48] {\n    font-size: 14px;\n    height: 32px;\n    margin-top: 5px;\n}\n.bottom_area[data-v-785d2f48] {\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  margin-top: -60px;\n}\n.bottom_area .btn_wait_permission[data-v-785d2f48] {\n    margin-right: 50px;\n}\n",""])},kR4T:function(t,e,n){"use strict";var i=n("/MTU");n.n(i).a},qyJz:function(t,e,n){"use strict";var i=n("+ZMJ"),a=n("kM2E"),r=n("sB3e"),o=n("msXi"),s=n("Mhyx"),l=n("QRG4"),c=n("fBQ2"),d=n("3fs2");a(a.S+a.F*!n("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,a,u,p=r(t),f="function"==typeof this?this:Array,x=arguments.length,v=x>1?arguments[1]:void 0,m=void 0!==v,h=0,b=d(p);if(m&&(v=i(v,x>2?arguments[2]:void 0,2)),void 0==b||f==Array&&s(b))for(n=new f(e=l(p.length));e>h;h++)c(n,h,m?v(p[h],h):p[h]);else for(u=b.call(p),n=new f;!(a=u.next()).done;h++)c(n,h,m?o(u,v,[a.value,h],!0):a.value);return n.length=h,n}})},sbtr:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".productPermissionLayout[data-v-41464946] {\n  height: 100%;\n  width: 100%;\n  padding: 24px 48px 24px 48px;\n  margin: auto;\n}\n",""])}});