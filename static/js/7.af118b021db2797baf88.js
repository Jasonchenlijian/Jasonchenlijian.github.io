webpackJsonp([7],{"/Aru":function(t,e,n){var a=n("8ni9");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("f7962c4c",a,!0)},"8ni9":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".top_area[data-v-61d61c68] {\n  font-size: 16px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-left: 24px;\n  color: #363c46;\n}\n.main_area[data-v-61d61c68] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-top: 30px;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.main_area .title[data-v-61d61c68] {\n    font-size: 20px;\n    height: 32px;\n}\n.main_area .edit[data-v-61d61c68] {\n    width: 90%;\n    margin: 20px auto auto auto;\n}\n.bottom_area[data-v-61d61c68] {\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  margin-top: -60px;\n}\n",""])},IEqB:function(t,e,n){"use strict";var a=n("T4EV");n.n(a).a},T4EV:function(t,e,n){var a=n("mDdq");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("c1709ec4",a,!0)},VKEw:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Xxa5"),o=n.n(a),i=n("exGp"),r=n.n(i),s=n("0jG4"),l=n("ilaD"),c=n("d63C"),u=n("d6hy"),p={components:{nodata:c.a},data:function(){return{tableInfo:{table:{pageSizes:[10,20,30,50],tableData:[],totalSize:0,loading:!1},paging:{pageSize:10,pageNum:1}},filters:{keyword:"",status:""}}},computed:{isInitButtonShow:function(){return this.tableInfo.table.tableData.length<1}},mounted:function(){this.init()},filters:{statusFromat:function(t){switch(t){case 1:return"已上架";case 2:return"待上架";case 3:return"审核中";case 4:return"审核不通过"}}},methods:{init:function(){this.search()},filterStatus:function(t,e){return e.status===t},onSearchView:function(){this.filters.status="",this.search()},search:function(){var t=this;return r()(o.a.mark(function e(){var n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.filters,n={pageSize:t.tableInfo.paging.pageSize,pageNum:t.tableInfo.paging.pageNum},t.tableInfo.table.loading=!0,e.next=6,s.g.getCurrentUserList(n,t.filters,t.filters.status);case 6:a=e.sent,t.tableInfo.table.tableData=a.list,t.tableInfo.paging.pageNum=a.paging.pageNum,t.tableInfo.paging.pageSize=a.paging.pageSize,t.tableInfo.table.totalSize=a.paging.dataCount;case 11:return e.prev=11,t.tableInfo.table.loading=!1,e.finish(11);case 14:case"end":return e.stop()}},e,t,[[0,,11,14]])}))()},addCBB:function(){l.b.goManageDetail("",!1)},edit:function(t){l.b.goManageDetail(t.productId,!1)},premission:function(t){l.b.goManagePermission(t.productId,!1)},up:function(t){var e=this;return r()(o.a.mark(function n(){var a;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=window.location.protocol+"//"+window.location.host+"/#/simpleLayout/audit?productId="+t+"&tab=1",console.log("url",a),n.next=4,s.g.shelfUp(t,a);case 4:e.search();case 5:case"end":return n.stop()}},n,e)}))()},down:function(t,e){var n=this;return r()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.g.shelfDown(t.productId,e);case 2:n.search();case 3:case"end":return a.stop()}},a,n)}))()},processCancel:function(t){var e=this;return r()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.g.processCancel(t.productId);case 2:e.search();case 3:case"end":return n.stop()}},n,e)}))()},del:function(t){var e=this;return r()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.g.del(t.productId);case 2:e.search();case 3:case"end":return n.stop()}},n,e)}))()},versionManage:function(t){l.b.goVersionManage(t.productId)},sizeChange:function(t){this.tableInfo.paging.pageSize=t,this.search()},pageChange:function(t){this.tableInfo.paging.pageNum=t,this.search()},downOptionDialog:function(t){var e=this;this.$modal.show(u.a,{title:"下架原因",editHint:"请详细描述具体的下架原因",tips:"申请成功后需经过下架审核流程，审通过自动下架"},{draggable:".top",height:"413px",width:"538px"},{closed:function(n){n&&e.down(t,n)}})},getOnShelfPopOption:function(t){var e=this,n=this;return r()(o.a.mark(function a(){var i,r,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={pageSize:1,pageNum:1},e.next=3,s.g.getMyVersionListByProductId(i,t,"");case 3:return r=e.sent,e.next=6,s.c.queryAuthorizeForProduct_download(t);case 6:if(c=e.sent,!(r.paging.dataCount<1)){e.next=11;break}return e.abrupt("return",{content:"您还未添加版本信息？\n请先添加版本信息及发布，才能进行上架",confirmCallback:function(){l.b.goVersionManage(t)}});case 11:if(!(c.length<1)){e.next=15;break}return e.abrupt("return",{content:"您还未授权下载权限？\n请先添授权下载权限，才能进行上架",confirmCallback:function(){l.b.goManagePermission(t)}});case 15:return e.abrupt("return",{htmlMode:!0,content:"确认要上架改资产？\n需经过上架审核流程，审核通过后自动上架",confirmCallback:function(){n.up(t)}});case 16:n.visible=!0;case 17:case"end":return e.stop()}},a,e)}))}}},d=(n("IEqB"),n("K1/g")),f=Object(d.a)(p,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"productManageLayout"},[n("div",{staticClass:"searchArea"},[n("el-input",{staticStyle:{width:"374px",height:"36px","background-color":"transparent"},attrs:{placeholder:"支持资产名称、简介搜索",maxlength:"20"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearchView(e)}},model:{value:t.filters.keyword,callback:function(e){t.$set(t.filters,"keyword",e)},expression:"filters.keyword"}},[n("i",{staticClass:"el-icon-search",staticStyle:{display:"flex","align-items":"center",height:"100%",width:"20px",cursor:"pointer","font-size":"15px"},attrs:{slot:"suffix"},on:{click:t.onSearchView},slot:"suffix"})])],1),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isInitButtonShow,expression:"!isInitButtonShow"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"primary",round:""},on:{click:t.addCBB}},[t._v(" 新增资产 ")]),t._v(" "),n("nodata",{attrs:{data:t.tableInfo.table.tableData,tips:"您还没有发布资产，赶紧来发布一个吧",loading:t.tableInfo.table.loading}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableInfo.table.loading,expression:"tableInfo.table.loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableInfo.table.tableData,"default-sort":{prop:"updateTime",order:"descending"}}},[n("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"资产名称",prop:"productName",width:"240px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"}},[t._v(t._s(a.productName))])]}}])}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"资产简介",prop:"productDesc","min-width":"300px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("div",{staticStyle:{width:"400px","max-height":"70px","white-space":"normal",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"2",overflow:"hidden","text-overflow":"ellipsis"}},[t._v(t._s(a.productDesc))])]}}])}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"资产状态",prop:"status",width:"150px",filters:[{text:"已上架",value:1},{text:"待上架",value:2},{text:"审核中",value:3},{text:"审核不通过",value:4}],"filter-method":t.filterStatus,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(t._f("statusFromat")(a.status)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"发布者",prop:"productCreaterName",width:"150px"}}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"发布时间",prop:"updateTime",width:"280px",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(t._f("datetimeformat")(a.updateTime)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",prop:"handle",width:"360px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[2==a.status||4==a.status?n("el-button",{staticStyle:{color:"rgba(51, 153, 255, 1)"},attrs:{type:"text"},on:{click:function(e){return t.edit(a)}}},[t._v("修改")]):t._e(),t._v(" "),2==a.status||4==a.status?n("el-divider",{attrs:{direction:"vertical"}}):t._e(),t._v(" "),2==a.status||4==a.status?n("confirm-button",{attrs:{popOption:t.getOnShelfPopOption(a.productId)}},[n("el-button",{staticStyle:{color:"rgba(51, 153, 255, 1)"},attrs:{type:"text"}},[t._v("上架申请")])],1):t._e(),t._v(" "),2==a.status||4==a.status?n("el-divider",{attrs:{direction:"vertical"}}):t._e(),t._v(" "),1==a.status?n("el-button",{staticStyle:{color:"rgba(51, 153, 255, 1)"},attrs:{type:"text"},on:{click:function(e){return t.downOptionDialog(a)}}},[t._v("下架申请")]):t._e(),t._v(" "),1==a.status?n("el-divider",{attrs:{direction:"vertical"}}):t._e(),t._v(" "),1==a.status||2==a.status||4==a.status?n("el-button",{staticStyle:{color:"rgba(51, 153, 255, 1)"},attrs:{type:"text"},on:{click:function(e){return t.premission(a)}}},[t._v("授权")]):t._e(),t._v(" "),1==a.status||2==a.status||4==a.status?n("el-divider",{attrs:{direction:"vertical"}}):t._e(),t._v(" "),2==a.status||4==a.status?n("confirm-button",{attrs:{popOption:{content:"确认要删除该资产？\n删除后，该资产信息将无法恢复"},confirmCallback:function(){t.del(a)}}},[n("el-button",{staticStyle:{color:"rgba(51, 153, 255, 1)"},attrs:{type:"text"}},[t._v("删除")])],1):t._e(),t._v(" "),2==a.status||4==a.status?n("el-divider",{attrs:{direction:"vertical"}}):t._e(),t._v(" "),3!=a.status?n("el-button",{staticStyle:{color:"rgba(51, 153, 255, 1)"},attrs:{type:"text"},on:{click:function(e){return t.versionManage(a)}}},[t._v("版本管理")]):t._e(),t._v(" "),3==a.status?n("confirm-button",{attrs:{popOption:{content:"确认要取消该资产审核？\n取消后，再次上架需重新走审核流程"},confirmCallback:function(){t.processCancel(a)}}},[n("el-button",{staticStyle:{color:"rgba(51, 153, 255, 1)"},attrs:{type:"text"}},[t._v("取消申请")])],1):t._e()]}}])})],1),t._v(" "),n("el-pagination",{staticClass:"bottom-pagination",attrs:{background:"","current-page":t.tableInfo.paging.pageNum,"page-sizes":[10,20,30,50],"page-size":t.tableInfo.paging.pageSize,layout:"total, prev, pager, next, sizes,jumper",total:t.tableInfo.table.totalSize},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1),t._v(" "),n("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center"}},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isInitButtonShow,expression:"isInitButtonShow"}],attrs:{type:"primary",round:""},on:{click:t.addCBB}},[t._v(" 发布资产 ")])],1)],1)},[],!1,null,"32ca71d2",null);e.default=f.exports},d6hy:function(t,e,n){"use strict";var a=n("XOvE"),o=n("yqLs"),i=(n("ilaD"),n("zL8q")),r={mixins:[o.a],props:{title:{type:String},editHint:{type:String},tips:{type:String}},data:function(){return{remark:""}},components:{modaltemplate2:a.a},methods:{close:function(){this.$closeModal()},confirm:function(){this.remark?this.$closeModal(this.remark):i.Message.error("请先填写内容")},cancel:function(){this.$closeModal()}}},s=(n("mCmT"),n("K1/g")),l=Object(s.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modaltemplate2",{scopedSlots:t._u([{key:"top",fn:function(){return[n("div",{staticClass:"top_area"},[t._v("提示")])]},proxy:!0},{key:"main",fn:function(){return[n("div",{staticClass:"main_area"},[n("div",{staticClass:"title"},[n("b",[t._v(t._s(t.title))])]),t._v(" "),n("el-input",{staticClass:"edit",attrs:{type:"textarea",rows:5,placeholder:t.editHint,maxlength:"500"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)]},proxy:!0},{key:"bottom",fn:function(){return[n("div",{staticClass:"bottom_area"},[n("el-button",{staticStyle:{"margin-right":"50px"},attrs:{round:""},on:{click:t.cancel}},[t._v(" 取消 ")]),t._v(" "),n("el-button",{attrs:{round:"",type:"primary"},on:{click:t.confirm}},[t._v(" 确定 ")])],1),t._v("·\n    ")]},proxy:!0}])})},[],!1,null,"61d61c68",null);e.a=l.exports},mCmT:function(t,e,n){"use strict";var a=n("/Aru");n.n(a).a},mDdq:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".productManageLayout[data-v-32ca71d2] {\n  padding: 24px 48px 24px 48px;\n  height: 100%;\n  width: 100%;\n  margin: auto;\n}\n.productManageLayout .searchArea[data-v-32ca71d2] {\n    margin-top: 0px;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    margin-bottom: 36px;\n}\n.productManageLayout .bottom-pagination[data-v-32ca71d2] {\n    text-align: center;\n    margin: 10px 0 20px 0;\n    height: 60px;\n}\n",""])}});